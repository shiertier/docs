---
title: "Nushell：结构化数据 Shell 工具"
对象: "GitHub 项目"
项目主页: "https://github.com/nushell/nushell"
Stars快照: "38506"
官方网站: "https://www.nushell.sh/"
主要语言: "Rust"
开源协议: "MIT"
---

## 摘要

**1) 一句话总结**
Nushell 是一款基于 Rust 开发的跨平台新型 Shell，它摒弃了传统的纯文本流，将所有输入和输出视为结构化数据，旨在提供结合函数式编程理念的现代化命令行体验。

**2) 关键要点**
* **项目背景**：使用 Rust 编写，采用 MIT 开源协议，目前在 GitHub 上拥有超 3.8 万 Stars。
* **核心理念**：将数据视为结构化表格（包含行和列）而非纯文本，并采用无可变状态的函数式数据处理理念。
* **结构化管道**：命令分为生成流、过滤流和消费流，通过管道符（`|`）传递结构化数据，默认以表格形式渲染输出（如 `ls | where type == "dir"`）。
* **智能文件解析**：`open` 命令可自动识别并解析特定格式文件（如 TOML），允许用户通过 `get` 命令逐层提取特定字段。
* **跨平台与兼容性**：支持 Windows、macOS 和 Linux，可作为日常终端或 CI/CD 自动化脚本环境，同时保持与各平台原生可执行程序的兼容。
* **插件系统**：支持通过遵循 `nu_plugin_*` 命名规范的独立二进制文件进行扩展，插件通过 JSON-RPC 协议与主程序交互。
* **生态集成**：已获得 zoxide、starship、oh-my-posh、virtualenv 等众多流行工具的官方支持与集成。
* **安装与配置**：支持通过 brew、winget 等主流包管理器安装，用户可通过 `$nu.config-path` 命令快速定位并修改配置文件。

**3) 风险与不足**
* 项目目前仍处于最小可行性产品（MVP）阶段。
* 尽管已被广泛使用，但部分命令可能仍存在不稳定性。
* 随着项目的不断成熟，其底层设计和功能仍有可能发生变动。

## 功能与定位
Nushell 是一种新型的跨平台 Shell，其设计灵感来源于 PowerShell、函数式编程语言以及现代 CLI 工具。与传统 Unix Shell 将文件和数据视为纯文本流不同，Nushell 将所有输入视为结构化数据（如包含行和列的表格），旨在提供符合现代软件标准的命令行可用性体验。

## 典型使用场景
* **跨平台日常终端**：作为 Windows、macOS 和 Linux 用户的日常主力 Shell。
* **结构化数据处理**：直接在命令行中读取、过滤和提取配置文件（如 TOML）或 API 返回的结构化数据。
* **CI/CD 自动化**：在 GitHub Actions 等持续集成环境中运行跨平台脚本。

## 核心功能
* **结构化管道（Pipelines）**：命令分为生成流、过滤流和消费流三类。通过管道符（`|`）连接，数据在管道中以结构化形式流转，默认以表格（Table）形式渲染输出。
* **智能文件解析**：`open` 命令可加载文件或 URL 内容，若识别出格式（如 `.toml`），会自动将其转换为结构化数据，允许用户通过 `get` 命令逐层钻取特定字段。
* **插件系统**：支持通过遵循 `nu_plugin_*` 命名规范的独立二进制文件扩展功能。插件通过简单的 JSON-RPC 协议与 Nushell 交互，可作为数据流的过滤器（Filter）或接收器（Sink）。
* **原生兼容性**：在提供新特性的同时，确保与现有各平台的原生可执行程序兼容。

## 特色与差异点
* **数据结构化而非纯文本**：例如执行 `ls` 或 `ps` 命令时，返回的不是纯文本字符串，而是包含名称、类型、大小等明确字段的表格数据，可直接使用 `where` 等条件语句进行精准过滤。
* **函数式数据处理理念**：摒弃可变状态（mutable state），管道操作纯粹用于加载、修改和保存数据。
* **广泛的生态集成**：已获得众多流行工具的官方支持与集成，包括 zoxide、starship、oh-my-posh、virtualenv、direnv 等。

## 使用方式概览
* **安装**：支持主流包管理器，如 macOS/Linux 使用 `brew install nushell`，Windows 使用 `winget install nushell`。GitHub Actions 中可通过 `setup-nu` 动作配置。
* **配置**：首次启动会生成默认配置文件。用户可在终端输入 `$nu.config-path` 查看配置文件的具体存放路径并进行自定义。
* **基础语法示例**：
  * 过滤目录：`ls | where type == "dir"`
  * 过滤进程：`ps | where cpu > 0`
  * 解析文件并提取字段：`open Cargo.toml | get package.version`

## 限制与注意事项
* 项目目前处于最小可行性产品（MVP）阶段。
* 尽管已被许多用户作为日常主力 Shell 使用，但部分命令可能仍存在不稳定性。
* 随着项目的不断成熟，其底层设计和功能仍有可能发生变动。

## 链接

- 仓库：https://github.com/nushell/nushell
- 官网：https://www.nushell.sh/

## 关联主题

- [[00-元语/tool]]
- [[00-元语/github]]
- [[00-元语/cli]]
- [[00-元语/desktop-client]]
- [[00-元语/workflow]]
