# 文档关联性

## 目标

保证“文档与文档”的链接是高置信度强关联，避免机械补链。

## 术语边界

- `## 关联主题`：概念级关联（元语词条），用于检索和聚合语义。
- `## 相关文档`：文档级关联（具体文章/项目），用于表达直接证据关系。
- 两者不是互斥关系：可同时存在，但都必须人工判定。

## 强制规则

1) 禁止批量写关联
- 禁止用脚本批量处理关联主题。
- 禁止用脚本批量新增或修改 `## 相关文档`、`## 关联主题`。
- 禁止按“共享元语数量”“关键词重合数量”自动回填关联。
- 允许批量并发调度任务（如 10 并发分片）以加速推进。
- 但每个任务内部必须逐篇人工判定：读完一篇再回写这一篇，禁止同一任务内机械批量回填。

2) 只允许强关联
- 允许关联：同一事件不同视角、同一命题支持/反对、直接引用与被引用、同一项目关键上下游、前后版本演进。
- 禁止关联：仅主题同类、仅同属一个目录、仅关键词相似、仅都提到 AI/Agent 等泛词。

3) 逐条可解释
- 每新增 1 条 `## 相关文档`，都必须在文档中显式写出“关联理由”与一句话说明。
- 推荐统一写法：`- [[路径|标题]]；关联理由：理由类型；说明：一句话`
- 理由类型建议从以下集合选择：`引用`、`解说`、`延伸思考`、`观点一致`、`观点相悖`、`同一事件`、`上下游`、`版本演进`。
- 如果解释只能停留在“都差不多”，则不应添加。
- 宁缺毋滥：允许某文档没有 `## 相关文档`。

4) 数量控制
- 单篇 `## 相关文档` 允许 0 条或多条，不设机械上限。
- 只保留可被明确论证的真实关联；无法给出理由的条目必须删除。

5) 元语补全策略
- 每篇文档都要先对照 `00-元语/` 现有词条，补齐“该篇确实适用且可解释”的缺漏项。
- 若现有词条无法覆盖且存在高共识稳定概念，才新增元语词条。
- 新增元语后，需立刻回写到当前文档的 `## 关联主题`，并在后续批次中复用。

## 推荐人工流程

1. 通读当前文档，先写一句核心观点。
2. 在全库中仅挑选“能被明确论证”的候选，不做“全命中全链接”。
3. 逐条核对候选是否满足“强关联”定义。
4. 手工写入 `## 相关文档`，并为每条写明 `关联理由 + 一句话说明`；如存在双向强关系，回写对方文档。

## 发布前自检

```bash
# 1) 相关文档小节分布（用于抽检）
rg -n "^## 相关文档$" 00-元语 01-博客 02-资源 03-图书

# 2) 理由缺失检查（命中即修复）
rg -nP "^- \\[\\[.*\\]\\](?!.*关联理由：)" 00-元语 01-博客 02-资源 03-图书

# 3) 理由类型检查（命中即复核）
rg -nP "关联理由：(?!引用|解说|延伸思考|观点一致|观点相悖|同一事件|上下游|版本演进)" 00-元语 01-博客 02-资源 03-图书

# 4) 机械化痕迹检查（命中即修复）
rg -n "自动生成|批量生成|按标签关联|按元语数量关联|按关键词关联|脚本生成关联" 00-元语 01-博客 02-资源 03-图书

# 5) 禁止脚本声明一致性（规范文件内应包含该约束）
rg -n "禁止用脚本批量处理关联主题|允许批量并发调度任务|每个任务内部必须逐篇人工判定|先对照 00-元语/ 现有词条|若现有词条无法覆盖且存在高共识稳定概念|关联理由：理由类型" AGENTS.md skills/tag-index-wiki.md skills/文档关联性.md
```

## 关联主题
- [[00-元语/knowledge-graph]]
- [[00-元语/wiki]]
- [[00-元语/workflow]]
