---
name: tag-index-wiki
description: 为文档添加“关联主题”文档链接并维护关系图谱，采用文档到文档的 Obsidian 组织方式。
---

# Relation Wiki

## 目标

把文档从“目录可见”升级为“语义可检索”：

- 每篇关键文档都有可复用的“关联主题”。
- 每个主题都是独立词条文档，不用汇总索引页。
- `00-元语/` 作为 wiki 枢纽，词条之间和词条到文档之间可关联。

强调：这套流程不依赖 Gemini。

## 元语定义（强制）

“元语”指可跨文档复用的名词或概念，且应有较高共识（绝大多数读者可形成近似理解）。

- 必须满足：
  - 是名词/概念，不是过程动作。
  - 不依赖某一篇文章的上下文就能被理解。
  - 对多篇文档的检索和关联有价值。
- 禁止作为元语：
  - 一次性任务词（如“今天要做什么”）
  - 流程词/动作词（如“步骤”“处理流程”）
  - 状态词/占位词（如“临时”“misc”“未分类”）

## 输出位置与命名（强制）

- 元语词条默认放在：`00-元语/`
- 若某概念在其他目录已有稳定且可复用的独立文档，可直接复用该文档，不强制在 `00-元语/` 再建一份
- 主题词条命名：优先使用主题本名（如 `github.md`、`prompt.md`、`mcp.md`）
- 已存在核心词条可直接复用（如 `AI.md`、`Agent.md`、`Codex.md`）
- 关系图谱入口：`00-元语/关系图谱.md`
- 临时文件：统一使用 `.tmp/`

## 关联规则（强制）

1) 关联小节
- 在文档中使用固定小节：`## 关联主题`
- 文档到文档关系使用固定小节：`## 相关文档`
- `## 相关文档` 仅在存在高置信度强关联时添加；每篇允许 0 条或多条，允许不写该小节（宁缺毋滥）。
- 推荐写法：`- [[01-博客/...|标题]]`、`- [[02-资源/...|标题]]`、`- [[03-图书/...|标题]]`
- 强制写法：每条都要显式写理由。推荐格式：`- [[路径|标题]]；关联理由：理由类型；说明：一句话`
- 理由类型建议：`引用`、`解说`、`延伸思考`、`观点一致`、`观点相悖`、`同一事件`、`上下游`、`版本演进`。
- `## 相关文档` 禁止链接不存在的文档路径
- 历史文档尚未迁移时，可临时保留 `## 标签`
- 每行一个主题链接。默认写法：`- [[00-元语/主题文档名]]`
- 若主题文档不在 `00-元语/`，允许直接链接实际路径（如 `- [[02-资源/某项目/某概念页]]`）
- 在 `00-元语/` 词条内，`## 相关词条` 与 `## 关联主题` 中的 `[[00-元语/...]]` 必须指向已存在词条，禁止悬空链接

2) 主题命名
- 新建主题文档名应使用“概念本名”，避免流程化和一次性命名
- 示例：`[[00-元语/github]]`、`[[00-元语/prompt]]`、`[[00-元语/mcp]]`
- 每个主题必须存在对应独立文档（默认 `00-元语/{主题文档名}.md`，或其他目录的既有概念文档）

3) 数量与边界
- 每篇建议 3-8 个主题链接。
- 只写“有检索价值且可验证”的主题。
- 禁止占位或机械词条（如 `misc`、`未分类`）。
- 不满足“元语定义”的词条，不能创建到 `00-元语/`。
- 若用 Gemini 扩写词条内容，必须在提示词中提供“词条白名单”，仅允许模型引用白名单内词条。

4) 同义词处理
- 避免重复主题（例如同时存在 `ai-agent` 与 `agent`）。
- 优先在 `00-元语/` 新增词条解释差异，用“相关词条”连接。
- `Agent` 与 `agents` 视为同一元语：统一链接到 `[[00-元语/Agent]]`。
- 禁止创建 `[[00-元语/agents]]` 或 `00-元语/agents.md`。

5) 禁止项
- 禁止创建或维护“标签索引”单文档（如 `00-元语/标签索引.md`）。
- 禁止使用 `- #tag` 语法作为最终交付格式。
- 禁止使用以下泛化元语：`article`、`resource`、`translation`、`open-source`、`rist`、`blog`。
- 命中禁用元语时，必须替换为更具体概念词（如 `github`、`learning-resource`、`workflow`、`tool`）。
- `tool`、`workflow` 仅可作为兜底元语；若正文可提炼出稳定领域概念（如 `ocr`、`tts`、`protocol`、`cli`、`virtual-file-system`），必须至少补 1 个具体元语。
- 禁止用脚本批量处理关联主题。
- 禁止用脚本批量新增或修改 `## 相关文档`；文档到文档关联同样必须人工判定。
- 允许批量并发调度任务（如 10 并发分片）加速处理。
- 但每个任务内部必须逐篇人工判定：读完一篇就回写这一篇，禁止同一任务内机械批量回填。
- `## 相关文档` 宁缺毋滥：若没有强关联，可不写该小节。
- 允许把“所有文档”一次性纳入待处理范围，再按 10 并发分片推进。

## 主题词条模板（推荐）

```markdown
# 主题名

## 文档信息

- 类型：主题词条
- 更新日期：YYYY-MM-DD

## 定义

## 相关词条
```

## 操作流程（SOP）

1) 逐篇处理
- 通读当前文档内容，确定 3-8 个有效主题。
- 先对照 `00-元语/` 全量现有词条，补齐“该篇确实适用且可解释”的缺漏主题。
- 若主题词条不存在且满足“元语定义”（高共识、可复用），再创建 `00-元语/{主题文档名}.md`。
- 若已有可复用概念文档在其他目录，直接链接该文档，不重复造词条。
- 立刻回到当前文档，写入 `## 关联主题`（或保留历史 `## 标签`），默认使用 `[[00-元语/主题文档名]]`，非默认路径需有明确理由。

2) 并发推进（推荐）
- 把待处理文档分片后并发执行任务（如 10 并发），每个任务独立处理各自文档集合。
- 并发的是任务调度，不是自动补链；每篇文档的关联仍需人工判定并手工回写。

3) 维护关系图谱
- 在 `00-元语/关系图谱.md` 用 wiki 链接维护概念关系。
- 关系图谱只写结构关系，不写过程日志。

4) 文档到文档关系（人工）
- 仅在存在高置信度强关联时手工写入 `## 相关文档`，条目数量按事实决定（可为 0 或多条）。
- 每条关联都必须在文档内写出“关联理由 + 一句话说明”。
- 若只能解释为“都差不多”，则不写。

## 发布前自检

```bash
rg -n "^## 关联主题$|^## 标签$" 00-元语 01-博客 02-资源 03-图书
rg -n "^- #[a-z0-9-]{2,32}$" 00-元语 01-博客 02-资源 03-图书
rg -n "\\[\\[00-元语/tag-" 00-元语 01-博客 02-资源 03-图书
comm -23 <(rg --no-filename -o "\\[\\[00-元语/[^\\]]+\\]\\]" 00-元语 | cut -d/ -f2 | sed 's/\]\]$//' | sort -u) <(find 00-元语 -maxdepth 1 -type f -name '*.md' -printf '%f\n' | sed 's/\.md$//' | sort -u)
rg -n "^# 标签索引$|\\[\\[标签索引\\]\\]|00-元语/标签索引\\.md" 00-元语 01-博客 02-资源 03-图书
rg -n "^# .*(流程|步骤|脚本|临时|待办|todo|索引|标签)$" 00-元语
rg -n "^- \\[\\[(01-博客|02-资源|03-图书)/" 00-元语 01-博客 02-资源 03-图书
rg -n "\\[\\[00-元语/(article|resource|translation|open-source|rist|blog)\\]\\]" 00-元语 01-博客 02-资源 03-图书
rg -n "\\[\\[00-元语/agents\\]\\]|^# (agents|Agents)$" 00-元语 01-博客 02-资源 03-图书
find 00-元语 -maxdepth 1 -type f -iname 'agents.md'
rg -nUPz "(?s)^## (关联主题|标签)\\n(?:- \\[\\[00-元语/(AI|Agent|tool|workflow|github|learning-resource)\\]\\]\\n){2,8}(?=\\n## |\\z)" 01-博客 02-资源 03-图书
rg -n "^## 相关文档$" 00-元语 01-博客 02-资源 03-图书
rg -nP "^- \\[\\[.*\\]\\](?!.*关联理由：)" 00-元语 01-博客 02-资源 03-图书
rg -nP "关联理由：(?!引用|解说|延伸思考|观点一致|观点相悖|同一事件|上下游|版本演进)" 00-元语 01-博客 02-资源 03-图书
rg -n "自动生成|批量生成|按标签关联|按元语数量关联|按关键词关联|脚本生成关联" 00-元语 01-博客 02-资源 03-图书
```

## 关联主题
- [[00-元语/wiki]]
- [[00-元语/knowledge-graph]]
- [[00-元语/meta]]
